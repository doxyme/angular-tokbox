/**
 * @license
 * lodash 3.10.1 (Custom Build) lodash.com/license | Underscore.js  underscorejs.org/LICENSE
 * Build: `lodash exports="global" iife="%output%" include="set,has,get,groupBy,find,findLast,debounce,sortBy,indexOf" -p -o ./.tmp/lodash-custom.min.js`
 */
function baseCompareAscending(e,r){if(e!==r){var n=null===e,t=void 0===e,o=e===e,a=null===r,i=void 0===r,s=r===r;if(e>r&&!a||!o||n&&!i&&s||t&&s)return 1;if(e<r&&!n||!s||a&&!t&&o||i&&o)return-1}return 0}function baseFindIndex(e,r,n){for(var t=e.length,o=n?t:-1;n?o--:++o<t;)if(r(e[o],o,e))return o;return-1}function baseIndexOf(e,r,n){if(r!==r)return indexOfNaN(e,n);n-=1;for(var t=e.length;++n<t;)if(e[n]===r)return n;return-1}function baseToString(e){return null==e?"":e+""}function compareAscending(e,r){return baseCompareAscending(e.a,r.a)||e.b-r.b}function indexOfNaN(e,r,n){var t=e.length;for(r+=n?0:-1;n?r--:++r<t;){var o=e[r];if(o!==o)return r}return-1}function isObjectLike(e){return!!e&&"object"==typeof e}function lodash(){}function arrayCopy(e,r){var n=-1,t=e.length;for(r||(r=Array(t));++n<t;)r[n]=e[n];return r}function arrayEach(e,r){for(var n=-1,t=e.length;++n<t&&!1!==r(e[n],n,e););return e}function arraySome(e,r){for(var n=-1,t=e.length;++n<t;)if(r(e[n],n,e))return!0;return!1}function baseAssign(e,r){return null==r?e:baseCopy(r,keys(r),e)}function baseCopy(e,r,n){n||(n={});for(var t=-1,o=r.length;++t<o;){var a=r[t];n[a]=e[a]}return n}function baseCallback(e,r,n){var t=typeof e;return"function"==t?void 0===r?e:bindCallback(e,r,n):null==e?identity:"object"==t?baseMatches(e):void 0===r?property(e):baseMatchesProperty(e,r)}function baseClone(e,r,n,t,o,a,i){var s;if(n&&(s=o?n(e,t,o):n(e)),void 0!==s)return s;if(!isObject(e))return e;if(t=isArray(e)){if(s=initCloneArray(e),!r)return arrayCopy(e,s)}else{var u=objToString.call(e),c=u==funcTag;if(u!=objectTag&&u!=argsTag&&(!c||o))return cloneableTags[u]?initCloneByTag(e,u,r):o?e:{};if(isHostObject(e))return o?e:{};if(s=initCloneObject(c?{}:e),!r)return baseAssign(s,e)}for(a||(a=[]),i||(i=[]),o=a.length;o--;)if(a[o]==e)return i[o];return a.push(e),i.push(s),(t?arrayEach:baseForOwn)(e,function(t,o){s[o]=baseClone(t,r,n,o,e,a,i)}),s}function baseFind(e,r,n,t){var o;return n(e,function(e,n,a){return r(e,n,a)?(o=t?n:e,!1):undefined}),o}function baseForOwn(e,r){return baseFor(e,r,keys)}function baseForOwnRight(e,r){return baseForRight(e,r,keys)}function baseGet(e,r,n){if(null!=e){e=toObject(e),void 0!==n&&n in e&&(r=[n]),n=0;for(var t=r.length;null!=e&&n<t;)e=toObject(e)[r[n++]];return n&&n==t?e:void 0}}function baseIsEqual(e,r,n,t,o,a){return e===r||(null==e||null==r||!isObject(e)&&!isObjectLike(r)?e!==e&&r!==r:baseIsEqualDeep(e,r,baseIsEqual,n,t,o,a))}function baseIsEqualDeep(e,r,n,t,o,a,i){var s=isArray(e),u=isArray(r),c=arrayTag,l=arrayTag;s||(c=objToString.call(e),c==argsTag?c=objectTag:c!=objectTag&&(s=isTypedArray(e))),u||(l=objToString.call(r),l==argsTag?l=objectTag:l!=objectTag&&isTypedArray(r));var g=c==objectTag&&!isHostObject(e),u=l==objectTag&&!isHostObject(r);if((l=c==l)&&!s&&!g)return equalByTag(e,r,c);if(!o&&(c=g&&hasOwnProperty.call(e,"__wrapped__"),u=u&&hasOwnProperty.call(r,"__wrapped__"),c||u))return n(c?e.value():e,u?r.value():r,t,o,a,i);if(!l)return!1;for(a||(a=[]),i||(i=[]),c=a.length;c--;)if(a[c]==e)return i[c]==r;return a.push(e),i.push(r),e=(s?equalArrays:equalObjects)(e,r,n,t,o,a,i),a.pop(),i.pop(),e}function baseIsMatch(e,r,n){var t=r.length,o=t,a=!n;if(null==e)return!o;for(e=toObject(e);t--;){var i=r[t];if(a&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++t<o;){var i=r[t],s=i[0],u=e[s],c=i[1];if(a&&i[2]){if(void 0===u&&!(s in e))return!1}else if(i=n?n(u,c,s):void 0,void 0===i?!baseIsEqual(c,u,n,!0):!i)return!1}return!0}function baseMap(e,r){var n=-1,t=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(e,o,a){t[++n]=r(e,o,a)}),t}function baseMatches(e){var r=getMatchData(e);if(1==r.length&&r[0][2]){var n=r[0][0],t=r[0][1];return function(e){return null!=e&&(e=toObject(e),e[n]===t&&(void 0!==t||n in e))}}return function(e){return baseIsMatch(e,r)}}function baseMatchesProperty(e,r){var n=isArray(e),t=isKey(e)&&isStrictComparable(r),o=e+"";return e=toPath(e),function(a){if(null==a)return!1;var i=o;if(a=toObject(a),!(!n&&t||i in a)){if(a=1==e.length?a:baseGet(a,baseSlice(e,0,-1)),null==a)return!1;i=last(e),a=toObject(a)}return a[i]===r?void 0!==r||i in a:baseIsEqual(r,a[i],void 0,!0)}}function baseProperty(e){return function(r){return null==r?void 0:toObject(r)[e]}}function basePropertyDeep(e){var r=e+"";return e=toPath(e),function(n){return baseGet(n,e,r)}}function baseSlice(e,r,n){var t=-1,o=e.length;for(r=null==r?0:+r||0,0>r&&(r=-r>o?0:o+r),n=void 0===n||n>o?o:+n||0,0>n&&(n+=o),o=r>n?0:n-r>>>0,r>>>=0,n=Array(o);++t<o;)n[t]=e[t+r];return n}function baseSortBy(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].c;return e}function binaryIndex(e,r,n){var t=0,o=e?e.length:t;if("number"==typeof r&&r===r&&o<=HALF_MAX_ARRAY_LENGTH){for(;t<o;){var a=t+o>>>1,i=e[a];(n?i<=r:i<r)&&null!==i?t=a+1:o=a}return o}return binaryIndexBy(e,r,identity,n)}function binaryIndexBy(e,r,n,t){r=n(r);for(var o=0,a=e?e.length:0,i=r!==r,s=null===r,u=void 0===r;o<a;){var c=nativeFloor((o+a)/2),l=n(e[c]),g=void 0!==l,f=l===l;(i?f||t:s?f&&g&&(t||null!=l):u?f&&(t||g):null==l?0:t?l<=r:l<r)?o=c+1:a=c}return nativeMin(a,MAX_ARRAY_INDEX)}function bindCallback(e,r,n){if("function"!=typeof e)return identity;if(void 0===r)return e;switch(n){case 1:return function(n){return e.call(r,n)};case 3:return function(n,t,o){return e.call(r,n,t,o)};case 4:return function(n,t,o,a){return e.call(r,n,t,o,a)};case 5:return function(n,t,o,a,i){return e.call(r,n,t,o,a,i)}}return function(){return e.apply(r,arguments)}}function bufferClone(e){var r=new ArrayBuffer(e.byteLength);return new Uint8Array(r).set(new Uint8Array(e)),r}function createAggregator(e,r){return function(n,t,o){var a=r?r():{};if(t=getCallback(t,o,3),isArray(n)){o=-1;for(var i=n.length;++o<i;){var s=n[o];e(a,s,t(s,o,n),n)}}else baseEach(n,function(r,n,o){e(a,r,t(r,n,o),o)});return a}}function createBaseEach(e,r){return function(n,t){var o=n?getLength(n):0;if(!isLength(o))return e(n,t);for(var a=r?o:-1,i=toObject(n);(r?a--:++a<o)&&!1!==t(i[a],a,i););return n}}function createBaseFor(e){return function(r,n,t){var o=toObject(r);t=t(r);for(var a=t.length,i=e?a:-1;e?i--:++i<a;){var s=t[i];if(!1===n(o[s],s,o))break}return r}}function createFind(e,r){return function(n,t,o){return t=getCallback(t,o,3),isArray(n)?(t=baseFindIndex(n,t,r),-1<t?n[t]:void 0):baseFind(n,t,e)}}function equalArrays(e,r,n,t,o,a,i){var s=-1,u=e.length,c=r.length;if(u!=c&&(!o||c<=u))return!1;for(;++s<u;){var l=e[s],c=r[s],g=t?t(o?c:l,o?l:c,s):void 0;if(void 0!==g){if(g)continue;return!1}if(o){if(!arraySome(r,function(e){return l===e||n(l,e,t,o,a,i)}))return!1}else if(l!==c&&!n(l,c,t,o,a,i))return!1}return!0}function equalByTag(e,r,n){switch(n){case boolTag:case dateTag:return+e==+r;case errorTag:return e.name==r.name&&e.message==r.message;case numberTag:return e!=+e?r!=+r:e==+r;case regexpTag:case stringTag:return e==r+""}return!1}function equalObjects(e,r,n,t,o,a,i){var s=keys(e),u=s.length,c=keys(r).length;if(u!=c&&!o)return!1;for(c=u;c--;){var l=s[c];if(!(o?l in r:hasOwnProperty.call(r,l)))return!1}for(var g=o;++c<u;){var l=s[c],f=e[l],p=r[l],b=t?t(o?p:f,o?f:p,l):void 0;if(void 0===b?!n(f,p,t,o,a,i):!b)return!1;g||(g="constructor"==l)}return!(!g&&(n=e.constructor,t=r.constructor,n!=t&&"constructor"in e&&"constructor"in r&&!("function"==typeof n&&n instanceof n&&"function"==typeof t&&t instanceof t)))}function getCallback(e,r,n){var t=lodash.callback||callback,t=t===callback?baseCallback:t;return n?t(e,r,n):t}function getMatchData(e){e=pairs(e);for(var r=e.length;r--;)e[r][2]=isStrictComparable(e[r][1]);return e}function getNative(e,r){var n=null==e?void 0:e[r];return isNative(n)?n:void 0}function initCloneArray(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&hasOwnProperty.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){return e=e.constructor,"function"==typeof e&&e instanceof e||(e=Object),new e}function initCloneByTag(e,r,n){var t=e.constructor;switch(r){case arrayBufferTag:return bufferClone(e);case boolTag:case dateTag:return new t((+e));case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return t instanceof t&&(t=ctorByTag[r]),r=e.buffer,new t(n?bufferClone(r):r,e.byteOffset,e.length);case numberTag:case stringTag:return new t(e);case regexpTag:var o=new t(e.source,reFlags.exec(e));o.lastIndex=e.lastIndex}return o}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,r){return e="number"==typeof e||reIsUint.test(e)?+e:-1,r=null==r?MAX_SAFE_INTEGER:r,-1<e&&0==e%1&&e<r}function isIterateeCall(e,r,n){if(!isObject(n))return!1;var t=typeof r;return!!("number"==t?isArrayLike(n)&&isIndex(r,n.length):"string"==t&&r in n)&&(r=n[r],e===e?e===r:r!==r)}function isKey(e,r){var n=typeof e;return!!("string"==n&&reIsPlainProp.test(e)||"number"==n)||!isArray(e)&&(!reIsDeepProp.test(e)||null!=r&&e in toObject(r))}function isLength(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=MAX_SAFE_INTEGER}function isStrictComparable(e){return e===e&&!isObject(e)}function shimKeys(e){for(var r=keysIn(e),n=r.length,t=n&&e.length,o=!!t&&isLength(t)&&(isArray(e)||isArguments(e)||isString(e)),a=-1,i=[];++a<n;){var s=r[a];(o&&isIndex(s,t)||hasOwnProperty.call(e,s))&&i.push(s)}return i}function toObject(e){if(lodash.support.unindexedChars&&isString(e)){for(var r=-1,n=e.length,t=Object(e);++r<n;)t[r]=e.charAt(r);return t}return isObject(e)?e:Object(e)}function toPath(e){if(isArray(e))return e;var r=[];return baseToString(e).replace(rePropName,function(e,n,t,o){r.push(t?o.replace(reEscapeChar,"$1"):n||e)}),r}function indexOf(e,r,n){var t=e?e.length:0;if(!t)return-1;if("number"==typeof n)n=0>n?nativeMax(t+n,0):n;else if(n)return n=binaryIndex(e,r),n<t&&(r===r?r===e[n]:e[n]!==e[n])?n:-1;return baseIndexOf(e,r,n||0)}function last(e){var r=e?e.length:0;return r?e[r-1]:void 0}function sortBy(e,r,n){if(null==e)return[];n&&isIterateeCall(e,r,n)&&(r=void 0);var t=-1;return r=getCallback(r,n,3),e=baseMap(e,function(e,n,o){return{a:r(e,n,o),b:++t,c:e}}),baseSortBy(e,compareAscending)}function debounce(e,r,n){function t(r,n){n&&clearTimeout(n),u=f=p=void 0,r&&(b=now(),c=e.apply(g,s),f||u||(s=g=void 0))}function o(){var e=r-(now()-l);0>=e||e>r?t(p,u):f=setTimeout(o,e)}function a(){t(y,f)}function i(){if(s=arguments,l=now(),g=this,p=y&&(f||!h),!1===d)var n=h&&!f;else{u||h||(b=l);var t=d-(l-b),i=0>=t||t>d;i?(u&&(u=clearTimeout(u)),b=l,c=e.apply(g,s)):u||(u=setTimeout(a,t))}return i&&f?f=clearTimeout(f):f||r===d||(f=setTimeout(o,r)),n&&(i=!0,c=e.apply(g,s)),!i||f||u||(s=g=void 0),c}var s,u,c,l,g,f,p,b=0,d=!1,y=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);if(r=0>r?0:+r||0,!0===n)var h=!0,y=!1;else isObject(n)&&(h=!!n.leading,d="maxWait"in n&&nativeMax(+n.maxWait||0,r),y="trailing"in n?!!n.trailing:y);return i.cancel=function(){f&&clearTimeout(f),u&&clearTimeout(u),b=0,u=f=p=void 0},i}function isArguments(e){return isObjectLike(e)&&isArrayLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")}function isFunction(e){return isObject(e)&&objToString.call(e)==funcTag}function isObject(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}function isNative(e){return null!=e&&(isFunction(e)?reIsNative.test(fnToString.call(e)):isObjectLike(e)&&(isHostObject(e)?reIsNative:reIsHostCtor).test(e))}function isString(e){return"string"==typeof e||isObjectLike(e)&&objToString.call(e)==stringTag}function isTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[objToString.call(e)]}function get(e,r,n){return e=null==e?void 0:baseGet(e,toPath(r),r+""),void 0===e?n:e}function has(e,r){if(null==e)return!1;var n=hasOwnProperty.call(e,r);if(!n&&!isKey(r)){if(r=toPath(r),e=1==r.length?e:baseGet(e,baseSlice(r,0,-1)),null==e)return!1;r=last(r),n=hasOwnProperty.call(e,r)}return n||isLength(e.length)&&isIndex(r,e.length)&&(isArray(e)||isArguments(e)||isString(e))}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));for(var r=e.length,n=lodash.support,r=r&&isLength(r)&&(isArray(e)||isArguments(e)||isString(e))&&r||0,t=e.constructor,o=-1,t=isFunction(t)&&t.prototype||objectProto,a=t===e,i=Array(r),s=0<r,u=n.enumErrorProps&&(e===errorProto||e instanceof Error),c=n.enumPrototypes&&isFunction(e);++o<r;)i[o]=o+"";for(var l in e)c&&"prototype"==l||u&&("message"==l||"name"==l)||s&&isIndex(l,r)||"constructor"==l&&(a||!hasOwnProperty.call(e,l))||i.push(l);if(n.nonEnumShadows&&e!==objectProto)for(r=e===stringProto?stringTag:e===errorProto?errorTag:objToString.call(e),n=nonEnumProps[r]||nonEnumProps[objectTag],r==objectTag&&(t=objectProto),r=shadowProps.length;r--;)l=shadowProps[r],o=n[l],a&&o||(o?!hasOwnProperty.call(e,l):e[l]===t[l])||i.push(l);return i}function pairs(e){e=toObject(e);for(var r=-1,n=keys(e),t=n.length,o=Array(t);++r<t;){var a=n[r];o[r]=[a,e[a]]}return o}function set(e,r,n){if(null==e)return e;var t=r+"";r=null!=e[t]||isKey(r,e)?[t]:toPath(r);for(var t=-1,o=r.length,a=o-1,i=e;null!=i&&++t<o;){var s=r[t];isObject(i)&&(t==a?i[s]=n:null==i[s]&&(i[s]=isIndex(r[t+1])?[]:{})),i=i[s]}return e}function callback(e,r,n){return n&&isIterateeCall(e,r,n)&&(r=void 0),isObjectLike(e)?matches(e):baseCallback(e,r)}function identity(e){return e}function matches(e){return baseMatches(baseClone(e,!0))}function property(e){return isKey(e)?baseProperty(e):basePropertyDeep(e)}var undefined,VERSION="3.10.1",FUNC_ERROR_TEXT="Expected a function",argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^\d+$/,shadowProps="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,freeGlobal=freeExports&&freeModule&&"object"==typeof global&&global&&global.Object&&global,freeSelf=objectTypes[typeof self]&&self&&self.Object&&self,freeWindow=objectTypes[typeof window]&&window&&window.Object&&window,root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this,isHostObject=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),arrayProto=Array.prototype,errorProto=Error.prototype,objectProto=Object.prototype,stringProto=String.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ArrayBuffer=root.ArrayBuffer,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,Uint8Array=root.Uint8Array,nativeFloor=Math.floor,nativeIsArray=getNative(Array,"isArray"),nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1,MAX_SAFE_INTEGER=9007199254740991,ctorByTag={};ctorByTag[float32Tag]=root.Float32Array,ctorByTag[float64Tag]=root.Float64Array,ctorByTag[int8Tag]=root.Int8Array,ctorByTag[int16Tag]=root.Int16Array,ctorByTag[int32Tag]=root.Int32Array,ctorByTag[uint8Tag]=Uint8Array,ctorByTag[uint8ClampedTag]=root.Uint8ClampedArray,ctorByTag[uint16Tag]=root.Uint16Array,ctorByTag[uint32Tag]=root.Uint32Array;var nonEnumProps={};nonEnumProps[arrayTag]=nonEnumProps[dateTag]=nonEnumProps[numberTag]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},nonEnumProps[boolTag]=nonEnumProps[stringTag]={constructor:!0,toString:!0,valueOf:!0},nonEnumProps[errorTag]=nonEnumProps[funcTag]=nonEnumProps[regexpTag]={constructor:!0,toString:!0},nonEnumProps[objectTag]={constructor:!0},arrayEach(shadowProps,function(e){for(var r in nonEnumProps)if(hasOwnProperty.call(nonEnumProps,r)){var n=nonEnumProps[r];n[e]=hasOwnProperty.call(n,e)}});var support=lodash.support={};!function(e){var r=function(){this.x=e},n={0:e,length:e},t=[];r.prototype={valueOf:e,y:e};for(var o in new r)t.push(o);support.enumErrorProps=propertyIsEnumerable.call(errorProto,"message")||propertyIsEnumerable.call(errorProto,"name"),support.enumPrototypes=propertyIsEnumerable.call(r,"prototype"),support.nonEnumShadows=!/valueOf/.test(t),support.spliceObjects=(splice.call(n,0,1),!n[0]),support.unindexedChars="xx"!="x"[0]+Object("x")[0]}(1,0);var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0),baseFor=createBaseFor(),baseForRight=createBaseFor(!0),getLength=baseProperty("length"),find=createFind(baseEach),findLast=createFind(baseEachRight,!0),groupBy=createAggregator(function(e,r,n){hasOwnProperty.call(e,n)?e[n].push(r):e[n]=[r]}),now=nativeNow||function(){return(new Date).getTime()},isArray=nativeIsArray||function(e){return isObjectLike(e)&&isLength(e.length)&&objToString.call(e)==arrayTag},keys=nativeKeys?function(e){var r=null==e?void 0:e.constructor;return"function"==typeof r&&r.prototype===e||("function"==typeof e?lodash.support.enumPrototypes:isArrayLike(e))?shimKeys(e):isObject(e)?nativeKeys(e):[]}:shimKeys;lodash.callback=callback,lodash.debounce=debounce,lodash.groupBy=groupBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.matches=matches,lodash.pairs=pairs,lodash.property=property,lodash.set=set,lodash.sortBy=sortBy,lodash.iteratee=callback,lodash.find=find,lodash.findLast=findLast,lodash.get=get,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isFunction=isFunction,lodash.isNative=isNative,lodash.isObject=isObject,lodash.isString=isString,lodash.isTypedArray=isTypedArray,lodash.last=last,lodash.now=now,lodash.detect=find,lodash.VERSION=VERSION,root._=lodash,console.log(lodash);var _=lodash;/*!
 *  opentok-angular (https://github.com/aullman/OpenTok-Angular)
 *
 *  Angular module for OpenTok
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 **/
angular.module("opentok",[]).constant("TB",window.OT).provider("OTConfig",function(){var e;return{setKey:function(r){e=r},$get:function(){return{apiKey:e}}}}).factory("OTSession",["TB","$rootScope","$q","OTConfig","$log","$timeout",function(e,r,n,t,o,a){if(!t.apiKey)throw new Error("You need to specify api key");var i={streams:[],uniqueStreams:{camera:[],screen:[]},connections:[],subscribers:[],publisher:null,screensharePublisher:null,ui:{hasAudio:!0,hasVideo:!0},init:function(a,s){return this.session=e.initSession(t.apiKey,a),i.session.on({sessionConnected:function(e){o.debug("OTSession:sessionConnected",e),i.publisher&&i.session.publish(i.publisher)},streamCreated:function(e){o.debug("OTSession:streamCreated",e),i.streams.push(e.stream),i.uniqueStreams.screen=i.getUniqueStreams("screen"),i.uniqueStreams.camera=i.getUniqueStreams("camera"),r.$digest()},streamDestroyed:function(e){o.debug("OTSession:streamDestroyed",e),i.streams.splice(i.streams.indexOf(e.stream),1),i.uniqueStreams.screen.splice(i.uniqueStreams.screen.indexOf(e.stream),1),i.uniqueStreams.camera.splice(i.uniqueStreams.camera.indexOf(e.stream),1),i.uniqueStreams.screen=i.getUniqueStreams("screen"),i.uniqueStreams.camera=i.getUniqueStreams("camera"),r.$digest()},sessionDisconnected:function(e){o.debug("OTSession:sessionDisconnected",e),r.$apply(function(){i.streams.splice(0,i.streams.length),i.uniqueStreams.screen.splice(0,i.uniqueStreams.screen.length),i.uniqueStreams.camera.splice(0,i.uniqueStreams.camera.length),i.connections.splice(0,i.connections.length),i.resetPublishers(),i.off(),i.session=null})},connectionCreated:function(e){o.debug("OTSession:connectionCreated",e),i.connections.push(e.connection),r.$digest()},connectionDestroyed:function(e){o.debug("OTSession:connectionDestroyed",e),i.connections.splice(i.connections.indexOf(e.connection),1),r.$digest()}}),i.trigger("init"),n(function(e,r){i.session.connect(s,function(n){return n?r(n):void e(i.session)})})},initPublisher:function(r,n,o){return e.initPublisher(t.apiKey,r,n,o)},isSessionConnected:function(){return this.session&&(this.session.connected||this.session.isConnected&&this.session.isConnected())},listen:function(e,r){Object.keys(e).forEach(function(n){i.session.on(n,function(t){e[n].call(r,t)})})},togglePublishersAudio:function(e){i.ui.hasAudio="boolean"==typeof e?e:!i.ui.hasAudio,i.publisher&&i.publisher.publishAudio(i.ui.hasAudio)},togglePublishersVideo:function(e){i.ui.hasVideo="boolean"==typeof e?e:!i.ui.hasVideo,i.publisher&&i.publisher.publishVideo(i.ui.hasVideo)},resetPublishers:function(){i.togglePublishersAudio(!0),i.togglePublishersVideo(!0)},getUniqueStreams:function(e){var r=_.groupBy(i.streams,"connection.id");return Object.keys(r).map(function(n){var t=r[n];return _.find(t,{videoType:e})}).filter(function(e){return!!e})},disconnect:function(){i.isSessionConnected()&&(i.publisher&&i.session.unpublish(i.publisher),i.session.disconnect())}};window.OTSession=i;var s=window.OTHelpers||window.OT.$||window.TB.$;return s&&s.eventing&&s.eventing(i),i}]).factory("OTDirectivesHelpers",[function(){return{volumeLevels:[{level:0,name:"volume-low"},{level:.3,name:"volume-medium"},{level:.85,name:"volume-high"}],getVolumeLevelChanges:function(){var e=null;return function(r){e=null===e||e<=r.audioLevel?r.audioLevel:.7*e+.3*r.audioLevel;var n=Math.log(e)/Math.LN10/1.5+1;return Math.min(Math.max(n,0),1)}},setVolumeLevelChanges:function(e,r){var n=this,t=this.volumeLevels.map(function(e){return e.name}).join(" ");e.removeClass(t);var o,a=this.getVolumeLevelChanges(),i=0,s=0;return function(u){if(i+=a(u),s++,30===s){var c=i/s;i=s=0;var l=_.findLast(n.volumeLevels,function(e){return c>=e.level});if(!l)return void console.log("!volume",{average:c,volumeLevels:n.volumeLevels});var g=l.name;r&&r(g),o!==g&&(o=g,e.removeClass(t),e.addClass(g))}}}}}]).directive("otLayout",["$window","$parse","TB","OTSession",function(e,r,n,t){return{restrict:"E",link:function(n,o,a){var i=r(a.props)(),s=e.initLayoutContainer(o[0],i),u=function(){s.layout(),n.$emit("otLayoutComplete")};n.$watch(function(){return o.children().length},u),e.addEventListener("resize",u),n.$on("otLayout",u);var c=function(){t.session.on("streamPropertyChanged",function(e){"videoDimensions"===e.changedProperty&&u()})};return t.session?c():void t.on("init",c)}}}]).directive("otPublisher",["$rootScope","OTSession","OTDirectivesHelpers",function(e,r,n){function t(r){var n;["accessAllowed","accessDenied","accessDialogClosed","accessDialogOpened"].forEach(function(t){r.on(t,function(){"accessDenied"===n&&"accessDialogOpened"===t||(n=t,e.$emit(t))})})}return{restrict:"E",scope:{props:"&"},link:function(o,a){var i=o.props()||{};i.width=i.width||a[0].offsetWidth,i.height=i.height||a[0].offsetHeight;var s=angular.element(a).children();o.publisher=r.initPublisher(a[0],i,function(r){r&&e.$emit("otPublisherError",r,o.publisher)}),angular.element(a).append(s),t(o.publisher),o.publisher.on("loaded",function(){o.publisher.on("audioLevelUpdated",n.setVolumeLevelChanges(a))}),o.$on("$destroy",function(){o.publisher.destroy(),r.publisher=o.publisher=null}),r.isSessionConnected()?r.session.publish(o.publisher):o.publisher.on("streamDestroyed",function(e){e.preventDefault()}),r.publisher=o.publisher}}}]).directive("otScreenPublisher",["$rootScope","OTSession","OTDirectivesHelpers","$log",function(e,r,n,t){return{restrict:"E",scope:{props:"&"},link:function(t,o){var a,i=angular.extend({mirror:!1,audioSource:null,videoSource:"screen",maxResolution:{width:1280,height:720},width:o[0].offsetWidth,height:o[0].offsetHeight},t.props()||{}),s=angular.element(o).children();a=r.initPublisher(o[0],i,function(r){if(r)return e.$emit("otScreenPublisher:error",r)}),angular.element(o).append(s),t.$on("$destroy",function(){r.session?r.session.unpublish(a):a.destroy(),r.screensharePublisher=a=null}),r.publisher&&r.publisher.on("audioLevelUpdated",n.setVolumeLevelChanges(o)),r.isSessionConnected()&&r.session.publish(a),a.on("streamDestroyed",function(r){e.$emit("TB:screenPublisher:streamDestroyed",r)}),r.screensharePublisher=a}}}]).directive("otActiveCallerLayout",["OTDirectivesHelpers",function(e){return{restrict:"EA",link:function(r){var n,t=[],o=_.debounce(function(){n&&n.removeClass("ot-active");var e=_.sortBy(t,"score").pop();n=e&&e.element.addClass("ot-active"),t=[]},500);r.$on("subscriber:volumeLevel",function(r,n,a){var i=_.find(t,"element",n);i||(i={element:n,score:0},t.push(i));var s=e.volumeLevels;i.score+=_.indexOf(s,_.find(s,"name",a)),o()})}}}]).directive("otSubscriber",["OTSession","OTDirectivesHelpers",function(e,r){return{restrict:"E",scope:{stream:"=",props:"&"},link:function(n,t){!n.stream,t.addClass("ot-"+n.stream.videoType);var o=n.props()||{};o.width=o.width||t[0].offsetWidth,o.height=o.height||t[0].offsetHeight;var a=t.children(),i=e.session.subscribe(n.stream,t[0],o,function(e){e&&n.$emit("otSubscriberError",e,i)});i.on("loaded",function(){e.subscribers.push(i),n.$emit(n,"otLayout"),i.on("audioLevelUpdated",function(e){e.audioLevel<.1||n.$emit("subscriber:audioLevelUpdated",e)}),i.on("audioLevelUpdated",r.setVolumeLevelChanges(t,function(e){n.$emit("subscriber:volumeLevel",t,e)}))}),angular.element(t).append(a),n.$on("$destroy",function(){e.subscribers.splice(e.subscribers.indexOf(i),1),e.session&&e.session.unsubscribe(i)})}}}]);